var ClientFormEnhancer=(()=>{(function(){"use strict";let p=!1,r=null;async function h(){try{let e=window.CLIENT_ID||"demo",o=`https://cdn.jsdelivr.net/gh/${window.BASE_URL||"krishnalewin-hash/tourism-ui-kit@main"}/clients/${e}.json`;console.log(`Loading client config from: ${o}`);let n=await fetch(o,{cache:"no-cache",headers:{Accept:"application/json"}});if(!n.ok)throw new Error(`Failed to load client config: ${n.status} ${n.statusText}`);return r=await n.json(),console.log("Client config loaded:",r),r.WINDOW_CFG?(window.CFG=r.WINDOW_CFG,console.log(`Successfully loaded config for client: ${e}`,window.CFG),!0):(console.warn(`No WINDOW_CFG found for client: ${e}. Available keys:`,Object.keys(r)),!1)}catch(e){return console.error("Failed to load client config:",e),window.CFG||(console.warn("Using fallback configuration"),window.CFG={GMAPS_KEY:"",COUNTRIES:["jm"],PLACES:{FIELDS:["place_id","formatted_address","geometry","name","types"],TYPES:["establishment"]}}),!1}}async function _(){if(window.google?.maps)return;if(!window.CFG||!window.CFG.GMAPS_KEY){console.warn("Form enhancer: No window.CFG.GMAPS_KEY found - Google Maps features will be disabled");return}if(!window.CFG.GMAPS_KEY.trim()){console.warn("Form enhancer: Empty GMAPS_KEY - Google Maps features will be disabled");return}console.log("Loading Google Maps API with key:",window.CFG.GMAPS_KEY.substring(0,10)+"...");let e=document.createElement("script");return e.src=`https://maps.googleapis.com/maps/api/js?key=${window.CFG.GMAPS_KEY}&libraries=places`,e.async=!0,e.defer=!0,new Promise((t,o)=>{e.onload=()=>{console.log("Google Maps API loaded successfully"),t()},e.onerror=n=>{console.error("Failed to load Google Maps API:",n),o(n)},document.head.appendChild(e)})}async function y(){if(p||!window.google?.maps||!window.CFG)return;let e=window.CFG.PLACES||{};f(['[data-q="pickup_location"]','[name="pickup_location"]'],"pickup_location",e),f(['[data-q="drop-off_location"]','[name="drop-off_location"]','[name="dropoff_location"]'],"dropoff_location",e),C(),s(),p=!0,console.log("Client-aware form enhancer initialized successfully")}function f(e,t,o){let n=k(e);if(!n)return;let a=new google.maps.places.Autocomplete(n,{fields:o.FIELDS||["place_id","formatted_address","geometry","name","types"],types:o.TYPES||["establishment"],componentRestrictions:{country:window.CFG.COUNTRIES||["jm"]}});a.addListener("place_changed",()=>{let i=a.getPlace();i.geometry&&b(t,{address:i.formatted_address,name:i.name,place_id:i.place_id,types:i.types,lat:i.geometry.location.lat(),lng:i.geometry.location.lng()})})}function k(e){for(let t of e){let o=document.querySelector(t);if(o)return o}return null}function C(){let e={'[data-q="pickup_location"]':c(),'[name="pickup_location"]':c(),'[data-q="drop-off_location"]':c(),'[name="drop-off_location"]':c(),'[name="dropoff_location"]':c(),'[data-q="pickup_date"]':u(),'[name="pickup_date"]':u(),'[data-q="pickup_time"]':m(),'[name="pickup_time"]':m(),'[data-q="number_of_passengers"]':g(),'[name="number_of_passengers"]':g()};Object.entries(e).forEach(([t,o])=>{let n=document.querySelector(t);n&&!n.parentElement.querySelector(".field-icon")&&E(n,o)})}function E(e,t){let o=document.createElement("div");o.style.position="relative",o.style.display="inline-block",o.style.width="100%",e.parentNode.insertBefore(o,e),o.appendChild(e);let n=document.createElement("div");n.className="field-icon",n.innerHTML=t,n.style.cssText=`
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
      z-index: 1;
      opacity: 0.6;
    `,o.appendChild(n),e.style.paddingLeft="40px"}function c(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>'}function u(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>'}function m(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12,6 12,12 16,14"></polyline></svg>'}function g(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>'}function s(){let e="transfer:last",t={pickup_location:['[data-q="pickup_location"]','[name="pickup_location"]'],dropoff_location:['[data-q="drop-off_location"]','[name="drop-off_location"]','[name="dropoff_location"]'],pickup_date:['[data-q="pickup_date"]','[name="pickup_date"]'],pickup_time:['[data-q="pickup_time"]','[name="pickup_time"]'],passengers:['select[data-q="number_of_passengers"]','[name="number_of_passengers"]','[data-q="number_of_passengers"]'],first_name:['[name="first_name"]','[data-q="full_name"]'],last_name:['[name="last_name"]'],email:['[name="email"]'],phone:['[name="phone"]']};function o(i){for(let l of i){let d=document.querySelector(l);if(d&&typeof d.value<"u")return d.value.trim()}return""}function n(){let i={};for(let l of Object.keys(t))i[l]=o(t[l]);return i}function a(){try{let i=n();sessionStorage.setItem(e,JSON.stringify(i))}catch{}}document.addEventListener("input",a,!0),document.addEventListener("change",a,!0),document.addEventListener("click",i=>{i.target.closest?.(".ghl-btn.ghl-footer-next, .ghl-btn.ghl-submit-btn")&&a()},!0),window.addEventListener("beforeunload",a)}function b(e,t){try{let o=JSON.parse(sessionStorage.getItem("transfer:last")||"{}");o[e]=t,o.timestamp=Date.now(),sessionStorage.setItem("transfer:last",JSON.stringify(o))}catch(o){console.warn("Failed to save form data:",o)}}async function w(){try{console.log("Initializing client-aware form enhancer..."),console.log("CLIENT_ID:",window.CLIENT_ID),await h()||console.warn("Client configuration not loaded - continuing with limited functionality"),window.CFG?.GMAPS_KEY?.trim()?await _():console.log("Skipping Google Maps - no API key available"),s(),setTimeout(()=>{window.google?.maps?y():console.log("Google Maps not available - form enhancement limited to data persistence")},1e3)}catch(e){console.error("Failed to initialize client-aware form enhancer:",e);try{s(),console.log("Fallback: data persistence enabled")}catch(t){console.error("Complete initialization failure:",t)}}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",w):w()})();})();
