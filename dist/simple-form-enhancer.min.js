var SimpleFormEnhancer=(()=>{(function(){"use strict";if(!window.CFG||!window.CFG.GMAPS_KEY){console.warn("Form enhancer: No window.CFG.GMAPS_KEY found");return}let s=window.CFG,d=!1;async function _(){if(window.google?.maps)return;let e=document.createElement("script");return e.src=`https://maps.googleapis.com/maps/api/js?key=${s.GMAPS_KEY}&libraries=places`,e.async=!0,e.defer=!0,new Promise((o,t)=>{e.onload=o,e.onerror=t,document.head.appendChild(e)})}async function h(){if(d||!window.google?.maps)return;let e=s.PLACES||{};p(['[data-q="pickup_location"]','[name="pickup_location"]'],"pickup_location",e),p(['[data-q="drop-off_location"]','[name="drop-off_location"]','[name="dropoff_location"]'],"dropoff_location",e),k(),v(),d=!0,console.log("Form enhancer initialized successfully")}function p(e,o,t){let a=y(e);if(!a)return;let i=new google.maps.places.Autocomplete(a,{fields:t.FIELDS||["place_id","formatted_address","geometry","name","types"],types:t.TYPES||["establishment"],componentRestrictions:{country:s.COUNTRIES||["jm"]}});i.addListener("place_changed",()=>{let n=i.getPlace();n.geometry&&x(o,{address:n.formatted_address,name:n.name,place_id:n.place_id,types:n.types,lat:n.geometry.location.lat(),lng:n.geometry.location.lng()})})}function y(e){for(let o of e){let t=document.querySelector(o);if(t)return t}return null}function k(){let e={'[data-q="pickup_location"]':r(),'[name="pickup_location"]':r(),'[data-q="drop-off_location"]':r(),'[name="drop-off_location"]':r(),'[name="dropoff_location"]':r(),'[data-q="pickup_date"]':u(),'[name="pickup_date"]':u(),'[data-q="pickup_time"]':f(),'[name="pickup_time"]':f(),'[data-q="number_of_passengers"]':m(),'[name="number_of_passengers"]':m()};Object.entries(e).forEach(([o,t])=>{let a=document.querySelector(o);a&&!a.parentElement.querySelector(".field-icon")&&w(a,t)})}function w(e,o){let t=document.createElement("div");t.style.position="relative",t.style.display="inline-block",t.style.width="100%",e.parentNode.insertBefore(t,e),t.appendChild(e);let a=document.createElement("div");a.className="field-icon",a.innerHTML=o,a.style.cssText=`
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
      z-index: 1;
      opacity: 0.6;
    `,t.appendChild(a),e.style.paddingLeft="40px"}function r(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"></path><circle cx="12" cy="10" r="3"></circle></svg>'}function u(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>'}function f(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12,6 12,12 16,14"></polyline></svg>'}function m(){return'<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M22 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>'}function v(){let e="transfer:last",o={pickup_location:['[data-q="pickup_location"]','[name="pickup_location"]'],dropoff_location:['[data-q="drop-off_location"]','[name="drop-off_location"]','[name="dropoff_location"]'],pickup_date:['[data-q="pickup_date"]','[name="pickup_date"]'],pickup_time:['[data-q="pickup_time"]','[name="pickup_time"]'],passengers:['select[data-q="number_of_passengers"]','[name="number_of_passengers"]','[data-q="number_of_passengers"]'],first_name:['[name="first_name"]','[data-q="full_name"]'],last_name:['[name="last_name"]'],email:['[name="email"]'],phone:['[name="phone"]']};function t(n){for(let c of n){let l=document.querySelector(c);if(l&&typeof l.value<"u")return l.value.trim()}return""}function a(){let n={};for(let c of Object.keys(o))n[c]=t(o[c]);return n}function i(){try{let n=a();sessionStorage.setItem(e,JSON.stringify(n))}catch{}}document.addEventListener("input",i,!0),document.addEventListener("change",i,!0),document.addEventListener("click",n=>{n.target.closest?.(".ghl-btn.ghl-footer-next, .ghl-btn.ghl-submit-btn")&&i()},!0),window.addEventListener("beforeunload",i)}function x(e,o){try{let t=JSON.parse(sessionStorage.getItem("transfer:last")||"{}");t[e]=o,t.timestamp=Date.now(),sessionStorage.setItem("transfer:last",JSON.stringify(t))}catch(t){console.warn("Failed to save form data:",t)}}async function g(){try{await _(),setTimeout(h,1e3)}catch(e){console.error("Failed to initialize form enhancer:",e)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g()})();})();
