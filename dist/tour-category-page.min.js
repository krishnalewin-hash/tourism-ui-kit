var TourCategory=(()=>{var W=':root{--card-bg:#fff;--card-border:#ececec;--muted:#6b7280;--accent:#D65130;--accent-600:#b54224;--shadow:0 8px 24px rgba(0,0,0,.06);--radius:12px}body,.tour-card,.tour-body,.tour-price{font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}.tour-list{display:grid;gap:16px}.tour-card{display:grid;grid-template-columns:320px 1fr 200px;gap:20px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;align-items:start}.title-link,.title-link:link,.title-link:visited{text-decoration:none;color:inherit}.title-link:hover,.title-link:active{text-decoration:none}.title-link:focus-visible{outline:none;text-decoration:none}.img-link{display:block;height:100%}.tour-card:hover{box-shadow:0 10px 28px rgba(0,0,0,.08);transition:box-shadow .2s;cursor:pointer}.tour-card[role="link"]:focus{outline:none;box-shadow:0 0 0 3px rgba(214,81,48,0.35)}.tour-img{position:relative;background:#f3f3f3;overflow:hidden;border-radius:var(--radius)}.tour-img img{width:100%;height:100%;object-fit:cover;display:block;aspect-ratio:4/3}.tour-body{padding:18px 16px;display:flex;flex-direction:column;gap:10px}.tour-body h3{margin:0;font-weight:700;font-size:22px;line-height:1.2;color:#111827}.tour-meta{display:flex;flex-wrap:wrap;gap:16px;font-size:13px;color:var(--muted)}.tour-desc{margin:0;color:#374151;line-height:1.6}.tour-price{border-left:1px solid var(--card-border);padding:16px;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:10px}.micro{font-size:12px;color:#6b7280}.amount{font-size:28px;font-weight:800;color:#0f172a;line-height:1}.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:5px;font-weight:700;text-decoration:none}.btn-primary{background:var(--accent);color:#fff}.btn-primary:hover,.btn-primary:focus{background:var(--accent-600)}.btn:focus{outline:2px solid #000;outline-offset:2px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.skeleton-list{display:grid;gap:16px}.skeleton{display:grid;grid-template-columns:320px 1fr 200px;gap:20px;background:#fff;border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}.shimmer{position:relative;background:#eef0f3;overflow:hidden;border-radius:12px}.shimmer::after{content:"";position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.6) 50%,rgba(255,255,255,0) 100%);animation:shimmer 1.4s infinite}@keyframes shimmer{100%{transform:translateX(100%)}}.sk-img{height:100%;min-height:220px}.sk-line{height:14px;border-radius:8px}.sk-line.lg{height:20px}.sk-pad{padding:18px 16px;display:flex;flex-direction:column;gap:12px}.sk-right{padding:16px;display:flex;flex-direction:column;gap:10px;border-left:1px solid var(--card-border)}.sk-pill{height:36px;border-radius:5px}@media (max-width:1024px){.tour-card,.skeleton{grid-template-columns:260px 1fr 180px}}@media (max-width:860px){.tour-card,.skeleton{grid-template-columns:1fr}.tour-price,.sk-right{border-left:none;border-top:1px solid var(--card-border);align-items:flex-start}.tour-img img{aspect-ratio:16/9}.sk-img{min-height:180px}.tour-body{padding:10px 16px}}';function $(){if(document.getElementById("tour-category-styles"))return;let r=document.createElement("style");r.id="tour-category-styles",r.textContent=W,document.head.appendChild(r)}function _(){if(document.querySelector('link[href*="Poppins"]'))return;let r=document.createElement("link");r.href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap",r.rel="stylesheet",document.head.appendChild(r)}async function G(){try{let r=window.CFG?.client||new URLSearchParams(location.search).get("client")||sessionStorage.getItem("client")||"demo",a="krishnalewin-hash/tourism-ui-kit@main";try{let e=document.querySelectorAll('script[src*="krishnalewin-hash/tourism-ui-kit"]');for(let o of e){let n=o.src.match(/krishnalewin-hash\/tourism-ui-kit@([^\/]+)/);if(n){a=`krishnalewin-hash/tourism-ui-kit@${n[1]}`;break}}}catch{console.log("[tour-category] Could not detect base URL from script tag")}let l=window.CFG?.base||a;console.log(`[tour-category] Loading client config: ${r}`),console.log(`[tour-category] Base URL: ${l}`);try{let e;l.startsWith("../")||l.startsWith("./")||l.startsWith("/")?e=`${l}/clients/_build/${r}.json`:e=`https://cdn.jsdelivr.net/gh/${l}/clients/_build/${r}.json`,console.log(`[tour-category] Fetching built config: ${e}`);let o=await fetch(e,{cache:"no-store"});if(o.ok){let n=await o.json();return n.SHARED_CONFIG?.TOUR_DATA_URL&&(window.CFG=window.CFG||{},window.CFG.DATA_URL=n.SHARED_CONFIG.TOUR_DATA_URL),console.log(`[tour-category] Successfully loaded ${r} configuration from built config`),console.log(`[tour-category] Using DATA_URL: ${window.CFG?.DATA_URL}`),n}else console.log(`[tour-category] Built config returned ${o.status}: ${o.statusText}`)}catch(e){console.log(`[tour-category] Built config fetch failed: ${e.message}`)}try{let e;l.startsWith("../")||l.startsWith("./")||l.startsWith("/")?e=`${l}/clients/${r}.json`:e=`https://cdn.jsdelivr.net/gh/${l}/clients/${r}.json`,console.log(`[tour-category] Trying legacy config: ${e}`);let o=await fetch(e,{cache:"no-store"});if(o.ok){let n=await o.json();return n.SHARED_CONFIG?.TOUR_DATA_URL&&(window.CFG=window.CFG||{},window.CFG.DATA_URL=n.SHARED_CONFIG.TOUR_DATA_URL),console.log(`[tour-category] Successfully loaded ${r} configuration from legacy config`),console.log(`[tour-category] Using DATA_URL: ${window.CFG?.DATA_URL}`),n}else console.log(`[tour-category] Legacy config returned ${o.status}: ${o.statusText}`)}catch(e){console.log(`[tour-category] Legacy config fetch failed: ${e.message}`)}return console.warn(`[tour-category] No configuration found for ${r}, using defaults`),null}catch(r){return console.error("[tour-category] Error loading client config:",r),null}}async function V(r="#tour-list"){let a=e=>new Promise(o=>setTimeout(o,e));function l(){let e=window.CFG&&window.CFG.LIST_SELECTOR||r,o=document.querySelector(e)||document.querySelector("#tour-list");if(o&&o.dataset){let{dataUrl:n,filterMode:c,filterValue:g,listSelector:h}=o.dataset;if(n||c||g||h)return{DATA_URL:n||window.CFG&&window.CFG.DATA_URL,FILTER:c||g?{mode:c||"all",value:g||""}:window.CFG&&window.CFG.FILTER,LIST_SELECTOR:h||window.CFG&&window.CFG.LIST_SELECTOR||"#tour-list"}}return window.CFG&&window.CFG.DATA_URL?window.CFG:null}document.readyState==="loading"&&await new Promise(e=>document.addEventListener("DOMContentLoaded",e,{once:!0}));for(let e=0;e<60;e++){let o=l();if(o&&o.DATA_URL)return window.CFG=o,o;await a(50)}return console.error("Tour list config not found. Ensure data-data-url or window.CFG is present."),null}(async function(){$(),_();try{await G()}catch{console.warn("[tour-category] Failed to load client config, using manual configuration")}if(!window.CFG?.DATA_URL&&window.CFG?.client){console.log("[tour-category] Attempting manual DATA_URL fallback for client:",window.CFG.client);let t={"tour-driver":"https://tour-driver-data-proxy.krishna-0a3.workers.dev",demo:"https://raw.githubusercontent.com/krishnalewin-hash/tourism-ui-kit/main/data/tour-driver-tours.json"};t[window.CFG.client]&&(window.CFG.DATA_URL=t[window.CFG.client],console.log("[tour-category] Using fallback DATA_URL:",window.CFG.DATA_URL))}await V("#tour-list");let{DATA_URL:r,FILTER:a,LIST_SELECTOR:l}=window.CFG||{},e=l||"#tour-list",o=document.querySelector(e),n=document.getElementById("skeleton"),c=t=>String(t??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),g=t=>String(t??"").toLowerCase().trim(),h=t=>{if(t==null||t==="")return"";let i=typeof t=="number"?t:Number(String(t).replace(/[^\d.]/g,""));if(!Number.isFinite(i))return c(t);try{return new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(i)}catch{return"$"+Math.round(i).toLocaleString()}},U=async(t,{timeout:i=12e3,...s}={})=>{let d=new AbortController,u=setTimeout(()=>d.abort(),i);try{return await fetch(t,{...s,signal:d.signal})}finally{clearTimeout(u)}},E=t=>{let i=2166136261;for(let s=0;s<t.length;s++)i^=t.charCodeAt(s),i=i+((i<<1)+(i<<4)+(i<<7)+(i<<8)+(i<<24))>>>0;return("0000000"+i.toString(16)).slice(-8)},v=t=>E(JSON.stringify(t||[])),D=(t=[])=>{let i=document.getElementById("tours-itemlist-ld");if(i&&i.remove(),!t.length)return;let s={"@context":"https://schema.org","@type":"ItemList",itemListElement:t.map((u,f)=>({"@type":"ListItem",position:f+1,url:`/${u.slug||""}`}))},d=document.createElement("script");d.type="application/ld+json",d.id="tours-itemlist-ld",d.textContent=JSON.stringify(s),document.head.appendChild(d)};if(n&&!n.children.length){let t=()=>`
      <div class="skeleton" role="presentation">
        <div class="shimmer sk-img"></div>
        <div class="sk-pad">
          <div class="shimmer sk-line lg" style="width:60%"></div>
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            <div class="shimmer sk-line" style="width:110px"></div>
            <div class="shimmer sk-line" style="width:130px"></div>
            <div class="shimmer sk-line" style="width:90px"></div>
          </div>
          <div class="shimmer sk-line" style="width:95%"></div>
          <div class="shimmer sk-line" style="width:88%"></div>
        </div>
        <div class="sk-right">
          <div class="shimmer sk-line" style="width:140px"></div>
          <div class="shimmer sk-line lg" style="width:80px"></div>
          <div class="shimmer sk-pill" style="width:140px"></div>
        </div>
      </div>`;n.innerHTML=t()+t()+t()}let m=()=>{n&&(n.setAttribute("hidden","true"),n.style.display="none",requestAnimationFrame(()=>n.remove()))},k=setTimeout(m,2e4),A="tours-cache-v2:"+[(r||"").split("?")[0],a?.mode||"all",a?.value||""].join("|"),I=()=>{try{return JSON.parse(localStorage.getItem(A))||null}catch{return null}},O=t=>{try{localStorage.setItem(A,JSON.stringify(t))}catch{}},C=t=>!a||a.mode==="all"?!0:a.mode==="tag"?(t.tags||[]).map(g).includes(g(a.value)):a.mode==="type"?g(t.type)===g(a.value):a.mode==="keyword"?[t.name,t.excerpt,(t.tags||[]).join(" ")].map(g).join(" ").includes(g(a.value)):!0,j=(t,i)=>{let s=c(t.name),d=t.duration?c(t.duration):"",u=t.location?c(t.location):"",f=t.type?c(t.type):"",R=t.group?c(t.group):"",S=t.excerpt?c(t.excerpt):"",z=c(t.slug||""),M=c(t.image||""),H="(max-width:860px) 100vw, 320px",b=`/${z}`;return`
    <article class="tour-card" data-url="${b}" aria-label="${s}">
      <div class="tour-img">
        <a href="${b}" class="img-link" aria-label="View ${s} details">
          <img
            src="${M}"
            sizes="${H}"
            alt="${s||"Tour image"}"
            ${i<2?'loading="eager" fetchpriority="high" decoding="async"':'loading="lazy" decoding="async"'}
            width="320" height="240"
          >
        </a>
      </div>
      <div class="tour-body">
        <h3><a href="${b}" class="title-link">${s}</a></h3>
        <div class="tour-meta" aria-label="Tour details">
          ${d?`<span><span aria-hidden="true">\u23F1 </span><span class="sr-only">Duration: </span>${d}</span>`:""}
          ${u?`<span><span aria-hidden="true">\u{1F4CD} </span><span class="sr-only">Location: </span>${u}</span>`:""}
          ${f?`<span><span aria-hidden="true">\u{1F3F7} </span><span class="sr-only">Type: </span>${f}</span>`:""}
          ${R?`<span><span aria-hidden="true">\u{1F465} </span><span class="sr-only">Group: </span>${R}</span>`:""}
        </div>
        ${S?`<p class="tour-desc">${S}</p>`:""}
      </div>
      <aside class="tour-price" aria-label="Price and actions">
        <div class="micro">Prices starting from\u2026</div>
        ${t.fromPrice!=null&&t.fromPrice!==""?`<div class="amount">${h(t.fromPrice)}</div>`:""}
        <div class="micro">Request exact quote</div>
        <a href="${b}" class="btn btn-primary">View Details</a>
      </aside>
    </article>`};function P(t){let i=t.querySelectorAll(".tour-card[data-url]");for(let s of i){let d=s.getAttribute("data-url");d&&(s.style.cursor="pointer",s.hasAttribute("tabindex")||s.setAttribute("tabindex","0"),s.setAttribute("role","link"),s.addEventListener("click",u=>{u.defaultPrevented||u.target.closest("a, button, input, select, textarea")||(window.location.href=d)}),s.addEventListener("keydown",u=>{u.target===s&&(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),window.location.href=d)}))}}let T=(t=[])=>{o.innerHTML=t.length?t.map((i,s)=>j(i,s)).join(""):`<div style="opacity:.8">No tours found for this filter.</div>
         <div><button class="btn btn-primary" type="button" onclick="location.reload()">Retry</button></div>`,o.hidden=!1,P(o),D(t)};if(!o){console.error("Mount not found:",e),clearTimeout(k),m();return}let y=I(),L=!1;if(y&&Array.isArray(y.tours)){let t=y.tours.filter(C);T(t),L=!0,requestAnimationFrame(m)}let w=new URLSearchParams;a?.mode&&a?.value&&(w.set("mode",a.mode),w.set("value",a.value)),w.set("v",Date.now().toString());let q=(r||"").includes("?")?"&":"?",N=(r||"")+q+w.toString(),p=[],x=null;try{let t=await U(N,{timeout:12e3,cache:"no-store"});if(!t.ok)throw new Error(`HTTP ${t.status}`);let i=await t.json();p=Array.isArray(i.tours)?i.tours:[],x=i.version||v(p)}catch(t){console.error("Fetch error",t)}let B=p.filter(C),F=y?.version||null;(!L||!F||x&&x!==F)&&(T(B),requestAnimationFrame(m),p.length&&O({version:x||v(p),tours:p})),requestAnimationFrame(()=>{clearTimeout(k),m()})})();window.TourCategory={init:async function(r={}){if(window.CFG={...window.CFG,...r},$(),_(),r.client)try{await G()}catch{console.warn("[tour-category] Failed to load client config, using manual configuration")}document.readyState==="loading"&&await new Promise(g=>document.addEventListener("DOMContentLoaded",g,{once:!0}));let{DATA_URL:a,FILTER:l,LIST_SELECTOR:e}=window.CFG||{},o=e||r.elementId||"#tour-list",n=document.querySelector(o),c=document.getElementById("skeleton");if(!n){console.error(`[tour-category] Mount element not found: ${o}`);return}if(!a){console.error("[tour-category] No DATA_URL configured");return}console.log("[tour-category] Programmatic initialization complete")}};})();
