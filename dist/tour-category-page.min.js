var TourCategory=(()=>{var W=':root{--card-bg:#fff;--card-border:#ececec;--muted:#6b7280;--accent:#D65130;--accent-600:#b54224;--shadow:0 8px 24px rgba(0,0,0,.06);--radius:12px}body,.tour-card,.tour-body,.tour-price{font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}.tour-list{display:grid;gap:16px}.tour-card{display:grid;grid-template-columns:320px 1fr 200px;gap:20px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;align-items:start}.title-link,.title-link:link,.title-link:visited{text-decoration:none;color:inherit}.title-link:hover,.title-link:active{text-decoration:none}.title-link:focus-visible{outline:none;text-decoration:none}.img-link{display:block;height:100%}.tour-card:hover{box-shadow:0 10px 28px rgba(0,0,0,.08);transition:box-shadow .2s;cursor:pointer}.tour-card[role="link"]:focus{outline:none;box-shadow:0 0 0 3px rgba(214,81,48,0.35)}.tour-img{position:relative;background:#f3f3f3;overflow:hidden;border-radius:var(--radius)}.tour-img img{width:100%;height:100%;object-fit:cover;display:block;aspect-ratio:4/3}.tour-body{padding:18px 16px;display:flex;flex-direction:column;gap:10px}.tour-body h3{margin:0;font-weight:700;font-size:22px;line-height:1.2;color:#111827}.tour-meta{display:flex;flex-wrap:wrap;gap:16px;font-size:13px;color:var(--muted)}.tour-desc{margin:0;color:#374151;line-height:1.6}.tour-price{border-left:1px solid var(--card-border);padding:16px;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:10px}.micro{font-size:12px;color:#6b7280}.amount{font-size:28px;font-weight:800;color:#0f172a;line-height:1}.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:5px;font-weight:700;text-decoration:none}.btn-primary{background:var(--accent);color:#fff}.btn-primary:hover,.btn-primary:focus{background:var(--accent-600)}.btn:focus{outline:2px solid #000;outline-offset:2px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.skeleton-list{display:grid;gap:16px}.skeleton{display:grid;grid-template-columns:320px 1fr 200px;gap:20px;background:#fff;border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}.shimmer{position:relative;background:#eef0f3;overflow:hidden;border-radius:12px}.shimmer::after{content:"";position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.6) 50%,rgba(255,255,255,0) 100%);animation:shimmer 1.4s infinite}@keyframes shimmer{100%{transform:translateX(100%)}}.sk-img{height:100%;min-height:220px}.sk-line{height:14px;border-radius:8px}.sk-line.lg{height:20px}.sk-pad{padding:18px 16px;display:flex;flex-direction:column;gap:12px}.sk-right{padding:16px;display:flex;flex-direction:column;gap:10px;border-left:1px solid var(--card-border)}.sk-pill{height:36px;border-radius:5px}@media (max-width:1024px){.tour-card,.skeleton{grid-template-columns:260px 1fr 180px}}@media (max-width:860px){.tour-card,.skeleton{grid-template-columns:1fr}.tour-price,.sk-right{border-left:none;border-top:1px solid var(--card-border);align-items:flex-start}.tour-img img{aspect-ratio:16/9}.sk-img{min-height:180px}.tour-body{padding:10px 16px}}';function $(){if(document.getElementById("tour-category-styles"))return;let i=document.createElement("style");i.id="tour-category-styles",i.textContent=W,document.head.appendChild(i)}function G(){if(document.querySelector('link[href*="Poppins"]'))return;let i=document.createElement("link");i.href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap",i.rel="stylesheet",document.head.appendChild(i)}async function _(){try{let i=window.CFG?.client||new URLSearchParams(location.search).get("client")||sessionStorage.getItem("client")||"demo",a="krishnalewin-hash/tourism-ui-kit@main";try{let t=document.querySelectorAll('script[src*="krishnalewin-hash/tourism-ui-kit"]');for(let o of t){let n=o.src.match(/krishnalewin-hash\/tourism-ui-kit@([^\/]+)/);if(n){a=`krishnalewin-hash/tourism-ui-kit@${n[1]}`;break}}}catch{console.log("[tour-category] Could not detect base URL from script tag")}let l=window.CFG?.base||a;console.log(`[tour-category] Loading client config: ${i}`),console.log(`[tour-category] Base URL: ${l}`);try{let t;l.startsWith("../")||l.startsWith("./")||l.startsWith("/")?t=`${l}/clients/_build/${i}.json`:t=`https://cdn.jsdelivr.net/gh/${l}/clients/_build/${i}.json`,console.log(`[tour-category] Fetching built config: ${t}`);let o=await fetch(t,{cache:"no-store"});if(o.ok){let n=await o.json();return n.SHARED_CONFIG?.TOUR_DATA_URL&&(window.CFG=window.CFG||{},window.CFG.DATA_URL=n.SHARED_CONFIG.TOUR_DATA_URL),console.log(`[tour-category] Successfully loaded ${i} configuration from built config`),console.log(`[tour-category] Using DATA_URL: ${window.CFG?.DATA_URL}`),n}else console.log(`[tour-category] Built config returned ${o.status}: ${o.statusText}`)}catch(t){console.log(`[tour-category] Built config fetch failed: ${t.message}`)}try{let t;l.startsWith("../")||l.startsWith("./")||l.startsWith("/")?t=`${l}/clients/${i}.json`:t=`https://cdn.jsdelivr.net/gh/${l}/clients/${i}.json`,console.log(`[tour-category] Trying legacy config: ${t}`);let o=await fetch(t,{cache:"no-store"});if(o.ok){let n=await o.json();return n.SHARED_CONFIG?.TOUR_DATA_URL&&(window.CFG=window.CFG||{},window.CFG.DATA_URL=n.SHARED_CONFIG.TOUR_DATA_URL),console.log(`[tour-category] Successfully loaded ${i} configuration from legacy config`),console.log(`[tour-category] Using DATA_URL: ${window.CFG?.DATA_URL}`),n}else console.log(`[tour-category] Legacy config returned ${o.status}: ${o.statusText}`)}catch(t){console.log(`[tour-category] Legacy config fetch failed: ${t.message}`)}return console.warn(`[tour-category] No configuration found for ${i}, using defaults`),null}catch(i){return console.error("[tour-category] Error loading client config:",i),null}}async function V(i="#tour-list"){let a=t=>new Promise(o=>setTimeout(o,t));function l(){let t=window.CFG&&window.CFG.LIST_SELECTOR||i,o=document.querySelector(t)||document.querySelector("#tour-list");if(o&&o.dataset){let{dataUrl:n,filterMode:c,filterValue:g,listSelector:h}=o.dataset;if(n||c||g||h)return{DATA_URL:n||window.CFG&&window.CFG.DATA_URL,FILTER:c||g?{mode:c||"all",value:g||""}:window.CFG&&window.CFG.FILTER,LIST_SELECTOR:h||window.CFG&&window.CFG.LIST_SELECTOR||"#tour-list"}}return window.CFG&&window.CFG.DATA_URL?window.CFG:null}document.readyState==="loading"&&await new Promise(t=>document.addEventListener("DOMContentLoaded",t,{once:!0}));for(let t=0;t<60;t++){let o=l();if(o&&o.DATA_URL)return window.CFG=o,o;await a(50)}return console.error("Tour list config not found. Ensure data-data-url or window.CFG is present."),null}(async function(){$(),G();try{await _()}catch{console.warn("[tour-category] Failed to load client config, using manual configuration")}!window.CFG?.DATA_URL&&window.CFG?.client&&(console.log("[tour-category] Client config loading failed for:",window.CFG.client),window.CFG.fallbackUrl?(window.CFG.DATA_URL=window.CFG.fallbackUrl,console.log("[tour-category] Using custom fallback DATA_URL:",window.CFG.DATA_URL)):(console.warn(`[tour-category] No DATA_URL available for client: ${window.CFG.client}. Please either:`),console.warn("1. Ensure client config exists in clients folder, or"),console.warn("2. Provide window.CFG.fallbackUrl, or"),console.warn("3. Set window.CFG.DATA_URL directly"))),await V("#tour-list");let{DATA_URL:i,FILTER:a,LIST_SELECTOR:l}=window.CFG||{},t=l||"#tour-list",o=document.querySelector(t),n=document.getElementById("skeleton"),c=e=>String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),g=e=>String(e??"").toLowerCase().trim(),h=e=>{if(e==null||e==="")return"";let r=typeof e=="number"?e:Number(String(e).replace(/[^\d.]/g,""));if(!Number.isFinite(r))return c(e);try{return new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(r)}catch{return"$"+Math.round(r).toLocaleString()}},U=async(e,{timeout:r=12e3,...s}={})=>{let d=new AbortController,u=setTimeout(()=>d.abort(),r);try{return await fetch(e,{...s,signal:d.signal})}finally{clearTimeout(u)}},E=e=>{let r=2166136261;for(let s=0;s<e.length;s++)r^=e.charCodeAt(s),r=r+((r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24))>>>0;return("0000000"+r.toString(16)).slice(-8)},b=e=>E(JSON.stringify(e||[])),D=(e=[])=>{let r=document.getElementById("tours-itemlist-ld");if(r&&r.remove(),!e.length)return;let s={"@context":"https://schema.org","@type":"ItemList",itemListElement:e.map((u,f)=>({"@type":"ListItem",position:f+1,url:`/${u.slug||""}`}))},d=document.createElement("script");d.type="application/ld+json",d.id="tours-itemlist-ld",d.textContent=JSON.stringify(s),document.head.appendChild(d)};if(n&&!n.children.length){let e=()=>`
      <div class="skeleton" role="presentation">
        <div class="shimmer sk-img"></div>
        <div class="sk-pad">
          <div class="shimmer sk-line lg" style="width:60%"></div>
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            <div class="shimmer sk-line" style="width:110px"></div>
            <div class="shimmer sk-line" style="width:130px"></div>
            <div class="shimmer sk-line" style="width:90px"></div>
          </div>
          <div class="shimmer sk-line" style="width:95%"></div>
          <div class="shimmer sk-line" style="width:88%"></div>
        </div>
        <div class="sk-right">
          <div class="shimmer sk-line" style="width:140px"></div>
          <div class="shimmer sk-line lg" style="width:80px"></div>
          <div class="shimmer sk-pill" style="width:140px"></div>
        </div>
      </div>`;n.innerHTML=e()+e()+e()}let m=()=>{n&&(n.setAttribute("hidden","true"),n.style.display="none",requestAnimationFrame(()=>n.remove()))},k=setTimeout(m,2e4),C="tours-cache-v2:"+[(i||"").split("?")[0],a?.mode||"all",a?.value||""].join("|"),I=()=>{try{return JSON.parse(localStorage.getItem(C))||null}catch{return null}},O=e=>{try{localStorage.setItem(C,JSON.stringify(e))}catch{}},A=e=>!a||a.mode==="all"?!0:a.mode==="tag"?(e.tags||[]).map(g).includes(g(a.value)):a.mode==="type"?g(e.type)===g(a.value):a.mode==="keyword"?[e.name,e.excerpt,(e.tags||[]).join(" ")].map(g).join(" ").includes(g(a.value)):!0,j=(e,r)=>{let s=c(e.name),d=e.duration?c(e.duration):"",u=e.location?c(e.location):"",f=e.type?c(e.type):"",S=e.group?c(e.group):"",R=e.excerpt?c(e.excerpt):"",M=c(e.slug||""),z=c(e.image||""),H="(max-width:860px) 100vw, 320px",v=`/${M}`;return`
    <article class="tour-card" data-url="${v}" aria-label="${s}">
      <div class="tour-img">
        <a href="${v}" class="img-link" aria-label="View ${s} details">
          <img
            src="${z}"
            sizes="${H}"
            alt="${s||"Tour image"}"
            ${r<2?'loading="eager" fetchpriority="high" decoding="async"':'loading="lazy" decoding="async"'}
            width="320" height="240"
          >
        </a>
      </div>
      <div class="tour-body">
        <h3><a href="${v}" class="title-link">${s}</a></h3>
        <div class="tour-meta" aria-label="Tour details">
          ${d?`<span><span aria-hidden="true">\u23F1 </span><span class="sr-only">Duration: </span>${d}</span>`:""}
          ${u?`<span><span aria-hidden="true">\u{1F4CD} </span><span class="sr-only">Location: </span>${u}</span>`:""}
          ${f?`<span><span aria-hidden="true">\u{1F3F7} </span><span class="sr-only">Type: </span>${f}</span>`:""}
             <!-- Mount Points -->
        <div id="skeleton" class="skeleton-list" aria-hidden="true"></div>
        <div id="tour-list" class="tour-list" hidden aria-live="polite"></div>
        
        <!-- Configuration -->
        <script>
        window.CFG = {
          client: 'tour-driver',
          FILTER: { mode: 'type', value: 'Food & Culinary' },
          LIST_SELECTOR: '#tour-list'
        };
        <\/script>
        
        <!-- Single-file component (includes CSS + JS + fonts) -->
        <script src="https://cdn.jsdelivr.net/gh/krishnalewin-hash/tourism-ui-kit@91a9e41/dist/tour-category-page.min.js"><\/script>     ${S?`<span><span aria-hidden="true">\u{1F465} </span><span class="sr-only">Group: </span>${S}</span>`:""}
        </div>
        ${R?`<p class="tour-desc">${R}</p>`:""}
      </div>
      <aside class="tour-price" aria-label="Price and actions">
        <div class="micro">Prices starting from\u2026</div>
        ${e.fromPrice!=null&&e.fromPrice!==""?`<div class="amount">${h(e.fromPrice)}</div>`:""}
        <div class="micro">Request exact quote</div>
        <a href="${v}" class="btn btn-primary">View Details</a>
      </aside>
    </article>`};function P(e){let r=e.querySelectorAll(".tour-card[data-url]");for(let s of r){let d=s.getAttribute("data-url");d&&(s.style.cursor="pointer",s.hasAttribute("tabindex")||s.setAttribute("tabindex","0"),s.setAttribute("role","link"),s.addEventListener("click",u=>{u.defaultPrevented||u.target.closest("a, button, input, select, textarea")||(window.location.href=d)}),s.addEventListener("keydown",u=>{u.target===s&&(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),window.location.href=d)}))}}let T=(e=[])=>{o.innerHTML=e.length?e.map((r,s)=>j(r,s)).join(""):`<div style="opacity:.8">No tours found for this filter.</div>
         <div><button class="btn btn-primary" type="button" onclick="location.reload()">Retry</button></div>`,o.hidden=!1,P(o),D(e)};if(!o){console.error("Mount not found:",t),clearTimeout(k),m();return}let w=I(),F=!1;if(w&&Array.isArray(w.tours)){let e=w.tours.filter(A);T(e),F=!0,requestAnimationFrame(m)}let y=new URLSearchParams;a?.mode&&a?.value&&(y.set("mode",a.mode),y.set("value",a.value)),y.set("v",Date.now().toString());let q=(i||"").includes("?")?"&":"?",N=(i||"")+q+y.toString(),p=[],x=null;try{let e=await U(N,{timeout:12e3,cache:"no-store"});if(!e.ok)throw new Error(`HTTP ${e.status}`);let r=await e.json();p=Array.isArray(r.tours)?r.tours:[],x=r.version||b(p)}catch(e){console.error("Fetch error",e)}let B=p.filter(A),L=w?.version||null;(!F||!L||x&&x!==L)&&(T(B),requestAnimationFrame(m),p.length&&O({version:x||b(p),tours:p})),requestAnimationFrame(()=>{clearTimeout(k),m()})})();window.TourCategory={init:async function(i={}){if(window.CFG={...window.CFG,...i},$(),G(),i.client)try{await _()}catch{console.warn("[tour-category] Failed to load client config, using manual configuration")}document.readyState==="loading"&&await new Promise(g=>document.addEventListener("DOMContentLoaded",g,{once:!0}));let{DATA_URL:a,FILTER:l,LIST_SELECTOR:t}=window.CFG||{},o=t||i.elementId||"#tour-list",n=document.querySelector(o),c=document.getElementById("skeleton");if(!n){console.error(`[tour-category] Mount element not found: ${o}`);return}if(!a){console.error("[tour-category] No DATA_URL configured");return}console.log("[tour-category] Programmatic initialization complete")}};})();
