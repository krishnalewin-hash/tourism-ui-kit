var TourCategory=(()=>{var W=':root{--card-bg:#fff;--card-border:#ececec;--muted:#6b7280;--accent:#D65130;--accent-600:#b54224;--shadow:0 8px 24px rgba(0,0,0,.06);--radius:12px}body,.tour-card,.tour-body,.tour-price{font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}.tour-list{display:grid;gap:16px}.tour-card{display:grid;grid-template-columns:320px 1fr 200px;gap:20px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;align-items:start}.title-link,.title-link:link,.title-link:visited{text-decoration:none;color:inherit}.title-link:hover,.title-link:active{text-decoration:none}.title-link:focus-visible{outline:none;text-decoration:none}.img-link{display:block;height:100%}.tour-card:hover{box-shadow:0 10px 28px rgba(0,0,0,.08);transition:box-shadow .2s;cursor:pointer}.tour-card[role="link"]:focus{outline:none;box-shadow:0 0 0 3px rgba(214,81,48,0.35)}.tour-img{position:relative;background:#f3f3f3;overflow:hidden;border-radius:var(--radius)}.tour-img img{width:100%;height:100%;object-fit:cover;display:block;aspect-ratio:4/3}.tour-body{padding:18px 16px;display:flex;flex-direction:column;gap:10px}.tour-body h3{margin:0;font-weight:700;font-size:22px;line-height:1.2;color:#111827}.tour-meta{display:flex;flex-wrap:wrap;gap:16px;font-size:13px;color:var(--muted)}.tour-desc{margin:0;color:#374151;line-height:1.6}.tour-price{border-left:1px solid var(--card-border);padding:16px;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:10px}.micro{font-size:12px;color:#6b7280}.amount{font-size:28px;font-weight:800;color:#0f172a;line-height:1}.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:5px;font-weight:700;text-decoration:none}.btn-primary{background:var(--accent);color:#fff}.btn-primary:hover,.btn-primary:focus{background:var(--accent-600)}.btn:focus{outline:2px solid #000;outline-offset:2px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.skeleton-list{display:grid;gap:16px}.skeleton{display:grid;grid-template-columns:320px 1fr 200px;gap:20px;background:#fff;border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}.shimmer{position:relative;background:#eef0f3;overflow:hidden;border-radius:12px}.shimmer::after{content:"";position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.6) 50%,rgba(255,255,255,0) 100%);animation:shimmer 1.4s infinite}@keyframes shimmer{100%{transform:translateX(100%)}}.sk-img{height:100%;min-height:220px}.sk-line{height:14px;border-radius:8px}.sk-line.lg{height:20px}.sk-pad{padding:18px 16px;display:flex;flex-direction:column;gap:12px}.sk-right{padding:16px;display:flex;flex-direction:column;gap:10px;border-left:1px solid var(--card-border)}.sk-pill{height:36px;border-radius:5px}@media (max-width:1024px){.tour-card,.skeleton{grid-template-columns:260px 1fr 180px}}@media (max-width:860px){.tour-card,.skeleton{grid-template-columns:1fr}.tour-price,.sk-right{border-left:none;border-top:1px solid var(--card-border);align-items:flex-start}.tour-img img{aspect-ratio:16/9}.sk-img{min-height:180px}.tour-body{padding:10px 16px}}';function R(){if(document.getElementById("tour-category-styles"))return;let o=document.createElement("style");o.id="tour-category-styles",o.textContent=W,document.head.appendChild(o)}function _(){if(document.querySelector('link[href*="Poppins"]'))return;let o=document.createElement("link");o.href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap",o.rel="stylesheet",document.head.appendChild(o)}async function E(){try{let o=window.CFG?.client||new URLSearchParams(location.search).get("client")||sessionStorage.getItem("client")||"demo",t=window.CFG?.base||"krishnalewin-hash/tourism-ui-kit@main";console.log(`[tour-category] Loading client config: ${o}`),console.log(`[tour-category] Base URL: ${t}`);try{let a;t.startsWith("../")||t.startsWith("./")||t.startsWith("/")?a=`${t}/clients/_build/${o}.json`:a=`https://cdn.jsdelivr.net/gh/${t}/clients/_build/${o}.json`,console.log(`[tour-category] Fetching built config: ${a}`);let n=await fetch(a,{cache:"no-store"});if(n.ok){let i=await n.json();return i.SHARED_CONFIG?.TOUR_DATA_URL&&(window.CFG=window.CFG||{},window.CFG.DATA_URL=i.SHARED_CONFIG.TOUR_DATA_URL),console.log(`[tour-category] Successfully loaded ${o} configuration from built config`),console.log(`[tour-category] Using DATA_URL: ${window.CFG?.DATA_URL}`),i}else console.log(`[tour-category] Built config returned ${n.status}: ${n.statusText}`)}catch(a){console.log(`[tour-category] Built config fetch failed: ${a.message}`)}try{let a;t.startsWith("../")||t.startsWith("./")||t.startsWith("/")?a=`${t}/clients/${o}.json`:a=`https://cdn.jsdelivr.net/gh/${t}/clients/${o}.json`,console.log(`[tour-category] Trying legacy config: ${a}`);let n=await fetch(a,{cache:"no-store"});if(n.ok){let i=await n.json();return i.SHARED_CONFIG?.TOUR_DATA_URL&&(window.CFG=window.CFG||{},window.CFG.DATA_URL=i.SHARED_CONFIG.TOUR_DATA_URL),console.log(`[tour-category] Successfully loaded ${o} configuration from legacy config`),console.log(`[tour-category] Using DATA_URL: ${window.CFG?.DATA_URL}`),i}else console.log(`[tour-category] Legacy config returned ${n.status}: ${n.statusText}`)}catch(a){console.log(`[tour-category] Legacy config fetch failed: ${a.message}`)}return console.warn(`[tour-category] No configuration found for ${o}, using defaults`),null}catch(o){return console.error("[tour-category] Error loading client config:",o),null}}async function V(o="#tour-list"){let t=n=>new Promise(i=>setTimeout(i,n));function a(){let n=window.CFG&&window.CFG.LIST_SELECTOR||o,i=document.querySelector(n)||document.querySelector("#tour-list");if(i&&i.dataset){let{dataUrl:p,filterMode:l,filterValue:u,listSelector:h}=i.dataset;if(p||l||u||h)return{DATA_URL:p||window.CFG&&window.CFG.DATA_URL,FILTER:l||u?{mode:l||"all",value:u||""}:window.CFG&&window.CFG.FILTER,LIST_SELECTOR:h||window.CFG&&window.CFG.LIST_SELECTOR||"#tour-list"}}return window.CFG&&window.CFG.DATA_URL?window.CFG:null}document.readyState==="loading"&&await new Promise(n=>document.addEventListener("DOMContentLoaded",n,{once:!0}));for(let n=0;n<60;n++){let i=a();if(i&&i.DATA_URL)return window.CFG=i,i;await t(50)}return console.error("Tour list config not found. Ensure data-data-url or window.CFG is present."),null}(async function(){R(),_();try{await E()}catch{console.warn("[tour-category] Failed to load client config, using manual configuration")}await V("#tour-list");let{DATA_URL:o,FILTER:t,LIST_SELECTOR:a}=window.CFG||{},n=a||"#tour-list",i=document.querySelector(n),p=document.getElementById("skeleton"),l=e=>String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),u=e=>String(e??"").toLowerCase().trim(),h=e=>{if(e==null||e==="")return"";let r=typeof e=="number"?e:Number(String(e).replace(/[^\d.]/g,""));if(!Number.isFinite(r))return l(e);try{return new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(r)}catch{return"$"+Math.round(r).toLocaleString()}},G=async(e,{timeout:r=12e3,...s}={})=>{let c=new AbortController,d=setTimeout(()=>c.abort(),r);try{return await fetch(e,{...s,signal:c.signal})}finally{clearTimeout(d)}},U=e=>{let r=2166136261;for(let s=0;s<e.length;s++)r^=e.charCodeAt(s),r=r+((r<<1)+(r<<4)+(r<<7)+(r<<8)+(r<<24))>>>0;return("0000000"+r.toString(16)).slice(-8)},v=e=>U(JSON.stringify(e||[])),D=(e=[])=>{let r=document.getElementById("tours-itemlist-ld");if(r&&r.remove(),!e.length)return;let s={"@context":"https://schema.org","@type":"ItemList",itemListElement:e.map((d,f)=>({"@type":"ListItem",position:f+1,url:`/${d.slug||""}`}))},c=document.createElement("script");c.type="application/ld+json",c.id="tours-itemlist-ld",c.textContent=JSON.stringify(s),document.head.appendChild(c)};if(p&&!p.children.length){let e=()=>`
      <div class="skeleton" role="presentation">
        <div class="shimmer sk-img"></div>
        <div class="sk-pad">
          <div class="shimmer sk-line lg" style="width:60%"></div>
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            <div class="shimmer sk-line" style="width:110px"></div>
            <div class="shimmer sk-line" style="width:130px"></div>
            <div class="shimmer sk-line" style="width:90px"></div>
          </div>
          <div class="shimmer sk-line" style="width:95%"></div>
          <div class="shimmer sk-line" style="width:88%"></div>
        </div>
        <div class="sk-right">
          <div class="shimmer sk-line" style="width:140px"></div>
          <div class="shimmer sk-line lg" style="width:80px"></div>
          <div class="shimmer sk-pill" style="width:140px"></div>
        </div>
      </div>`;p.innerHTML=e()+e()+e()}let m=()=>{p&&(p.setAttribute("hidden","true"),p.style.display="none",requestAnimationFrame(()=>p.remove()))},k=setTimeout(m,2e4),C="tours-cache-v2:"+[(o||"").split("?")[0],t?.mode||"all",t?.value||""].join("|"),I=()=>{try{return JSON.parse(localStorage.getItem(C))||null}catch{return null}},O=e=>{try{localStorage.setItem(C,JSON.stringify(e))}catch{}},T=e=>!t||t.mode==="all"?!0:t.mode==="tag"?(e.tags||[]).map(u).includes(u(t.value)):t.mode==="type"?u(e.type)===u(t.value):t.mode==="keyword"?[e.name,e.excerpt,(e.tags||[]).join(" ")].map(u).join(" ").includes(u(t.value)):!0,j=(e,r)=>{let s=l(e.name),c=e.duration?l(e.duration):"",d=e.location?l(e.location):"",f=e.type?l(e.type):"",S=e.group?l(e.group):"",$=e.excerpt?l(e.excerpt):"",z=l(e.slug||""),M=l(e.image||""),H="(max-width:860px) 100vw, 320px",b=`/${z}`;return`
    <article class="tour-card" data-url="${b}" aria-label="${s}">
      <div class="tour-img">
        <a href="${b}" class="img-link" aria-label="View ${s} details">
          <img
            src="${M}"
            sizes="${H}"
            alt="${s||"Tour image"}"
            ${r<2?'loading="eager" fetchpriority="high" decoding="async"':'loading="lazy" decoding="async"'}
            width="320" height="240"
          >
        </a>
      </div>
      <div class="tour-body">
        <h3><a href="${b}" class="title-link">${s}</a></h3>
        <div class="tour-meta" aria-label="Tour details">
          ${c?`<span><span aria-hidden="true">\u23F1 </span><span class="sr-only">Duration: </span>${c}</span>`:""}
          ${d?`<span><span aria-hidden="true">\u{1F4CD} </span><span class="sr-only">Location: </span>${d}</span>`:""}
          ${f?`<span><span aria-hidden="true">\u{1F3F7} </span><span class="sr-only">Type: </span>${f}</span>`:""}
          ${S?`<span><span aria-hidden="true">\u{1F465} </span><span class="sr-only">Group: </span>${S}</span>`:""}
        </div>
        ${$?`<p class="tour-desc">${$}</p>`:""}
      </div>
      <aside class="tour-price" aria-label="Price and actions">
        <div class="micro">Prices starting from\u2026</div>
        ${e.fromPrice!=null&&e.fromPrice!==""?`<div class="amount">${h(e.fromPrice)}</div>`:""}
        <div class="micro">Request exact quote</div>
        <a href="${b}" class="btn btn-primary">View Details</a>
      </aside>
    </article>`};function P(e){let r=e.querySelectorAll(".tour-card[data-url]");for(let s of r){let c=s.getAttribute("data-url");c&&(s.style.cursor="pointer",s.hasAttribute("tabindex")||s.setAttribute("tabindex","0"),s.setAttribute("role","link"),s.addEventListener("click",d=>{d.defaultPrevented||d.target.closest("a, button, input, select, textarea")||(window.location.href=c)}),s.addEventListener("keydown",d=>{d.target===s&&(d.key==="Enter"||d.key===" ")&&(d.preventDefault(),window.location.href=c)}))}}let A=(e=[])=>{i.innerHTML=e.length?e.map((r,s)=>j(r,s)).join(""):`<div style="opacity:.8">No tours found for this filter.</div>
         <div><button class="btn btn-primary" type="button" onclick="location.reload()">Retry</button></div>`,i.hidden=!1,P(i),D(e)};if(!i){console.error("Mount not found:",n),clearTimeout(k),m();return}let y=I(),L=!1;if(y&&Array.isArray(y.tours)){let e=y.tours.filter(T);A(e),L=!0,requestAnimationFrame(m)}let w=new URLSearchParams;t?.mode&&t?.value&&(w.set("mode",t.mode),w.set("value",t.value)),w.set("v",Date.now().toString());let q=(o||"").includes("?")?"&":"?",N=(o||"")+q+w.toString(),g=[],x=null;try{let e=await G(N,{timeout:12e3,cache:"no-store"});if(!e.ok)throw new Error(`HTTP ${e.status}`);let r=await e.json();g=Array.isArray(r.tours)?r.tours:[],x=r.version||v(g)}catch(e){console.error("Fetch error",e)}let B=g.filter(T),F=y?.version||null;(!L||!F||x&&x!==F)&&(A(B),requestAnimationFrame(m),g.length&&O({version:x||v(g),tours:g})),requestAnimationFrame(()=>{clearTimeout(k),m()})})();window.TourCategory={init:async function(o={}){if(window.CFG={...window.CFG,...o},R(),_(),o.client)try{await E()}catch{console.warn("[tour-category] Failed to load client config, using manual configuration")}document.readyState==="loading"&&await new Promise(u=>document.addEventListener("DOMContentLoaded",u,{once:!0}));let{DATA_URL:t,FILTER:a,LIST_SELECTOR:n}=window.CFG||{},i=n||o.elementId||"#tour-list",p=document.querySelector(i),l=document.getElementById("skeleton");if(!p){console.error(`[tour-category] Mount element not found: ${i}`);return}if(!t){console.error("[tour-category] No DATA_URL configured");return}console.log("[tour-category] Programmatic initialization complete")}};})();
