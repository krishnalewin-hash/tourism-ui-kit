var TourCategory=(()=>{var W=':root{--card-bg:#fff;--card-border:#ececec;--muted:#6b7280;--accent:#D65130;--accent-600:#b54224;--shadow:0 8px 24px rgba(0,0,0,.06);--radius:12px}body,.tour-card,.tour-body,.tour-price{font-family:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}.tour-list{display:grid;gap:16px}.tour-card{display:grid;grid-template-columns:320px 1fr 200px;gap:20px;background:var(--card-bg);border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden;align-items:start}.title-link,.title-link:link,.title-link:visited{text-decoration:none;color:inherit}.title-link:hover,.title-link:active{text-decoration:none}.title-link:focus-visible{outline:none;text-decoration:none}.img-link{display:block;height:100%}.tour-card:hover{box-shadow:0 10px 28px rgba(0,0,0,.08);transition:box-shadow .2s;cursor:pointer}.tour-card[role="link"]:focus{outline:none;box-shadow:0 0 0 3px rgba(214,81,48,0.35)}.tour-img{position:relative;background:#f3f3f3;overflow:hidden;border-radius:var(--radius)}.tour-img img{width:100%;height:100%;object-fit:cover;display:block;aspect-ratio:4/3}.tour-body{padding:18px 16px;display:flex;flex-direction:column;gap:10px}.tour-body h3{margin:0;font-weight:700;font-size:22px;line-height:1.2;color:#111827}.tour-meta{display:flex;flex-wrap:wrap;gap:16px;font-size:13px;color:var(--muted)}.tour-desc{margin:0;color:#374151;line-height:1.6}.tour-price{border-left:1px solid var(--card-border);padding:16px;display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:10px}.micro{font-size:12px;color:#6b7280}.amount{font-size:28px;font-weight:800;color:#0f172a;line-height:1}.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:5px;font-weight:700;text-decoration:none}.btn-primary{background:var(--accent);color:#fff}.btn-primary:hover,.btn-primary:focus{background:var(--accent-600)}.btn:focus{outline:2px solid #000;outline-offset:2px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.skeleton-list{display:grid;gap:16px}.skeleton{display:grid;grid-template-columns:320px 1fr 200px;gap:20px;background:#fff;border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}.shimmer{position:relative;background:#eef0f3;overflow:hidden;border-radius:12px}.shimmer::after{content:"";position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg,rgba(255,255,255,0) 0%,rgba(255,255,255,.6) 50%,rgba(255,255,255,0) 100%);animation:shimmer 1.4s infinite}@keyframes shimmer{100%{transform:translateX(100%)}}.sk-img{height:100%;min-height:220px}.sk-line{height:14px;border-radius:8px}.sk-line.lg{height:20px}.sk-pad{padding:18px 16px;display:flex;flex-direction:column;gap:12px}.sk-right{padding:16px;display:flex;flex-direction:column;gap:10px;border-left:1px solid var(--card-border)}.sk-pill{height:36px;border-radius:5px}@media (max-width:1024px){.tour-card,.skeleton{grid-template-columns:260px 1fr 180px}}@media (max-width:860px){.tour-card,.skeleton{grid-template-columns:1fr}.tour-price,.sk-right{border-left:none;border-top:1px solid var(--card-border);align-items:flex-start}.tour-img img{aspect-ratio:16/9}.sk-img{min-height:180px}.tour-body{padding:10px 16px}}';function $(){if(document.getElementById("tour-category-styles"))return;let n=document.createElement("style");n.id="tour-category-styles",n.textContent=W,document.head.appendChild(n)}function _(){if(document.querySelector('link[href*="Poppins"]'))return;let n=document.createElement("link");n.href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap",n.rel="stylesheet",document.head.appendChild(n)}async function G(){try{let n=window.CFG?.client||new URLSearchParams(location.search).get("client")||sessionStorage.getItem("client")||"demo",a="krishnalewin-hash/tourism-ui-kit@main";try{let o=document.querySelectorAll('script[src*="krishnalewin-hash/tourism-ui-kit"]');for(let i of o){let r=i.src.match(/krishnalewin-hash\/tourism-ui-kit@([^\/]+)/);if(r){a=`krishnalewin-hash/tourism-ui-kit@${r[1]}`;break}}}catch{console.log("[tour-category] Could not detect base URL from script tag")}let l=window.CFG?.base||a;console.log(`[tour-category] Loading client config: ${n}`),console.log(`[tour-category] Base URL: ${l}`);try{let o;l.startsWith("../")||l.startsWith("./")||l.startsWith("/")?o=`${l}/clients/_build/${n}.json`:o=`https://cdn.jsdelivr.net/gh/${l}/clients/_build/${n}.json`,console.log(`[tour-category] Fetching built config: ${o}`);let i=await fetch(o,{cache:"no-store"});if(i.ok){let r=await i.json();return r.SHARED_CONFIG?.TOUR_DATA_URL&&(window.CFG=window.CFG||{},window.CFG.DATA_URL=r.SHARED_CONFIG.TOUR_DATA_URL),console.log(`[tour-category] Successfully loaded ${n} configuration from built config`),console.log(`[tour-category] Using DATA_URL: ${window.CFG?.DATA_URL}`),r}else console.log(`[tour-category] Built config returned ${i.status}: ${i.statusText}`)}catch(o){console.log(`[tour-category] Built config fetch failed: ${o.message}`)}try{let o;l.startsWith("../")||l.startsWith("./")||l.startsWith("/")?o=`${l}/clients/${n}.json`:o=`https://cdn.jsdelivr.net/gh/${l}/clients/${n}.json`,console.log(`[tour-category] Trying legacy config: ${o}`);let i=await fetch(o,{cache:"no-store"});if(i.ok){let r=await i.json();return r.SHARED_CONFIG?.TOUR_DATA_URL&&(window.CFG=window.CFG||{},window.CFG.DATA_URL=r.SHARED_CONFIG.TOUR_DATA_URL),console.log(`[tour-category] Successfully loaded ${n} configuration from legacy config`),console.log(`[tour-category] Using DATA_URL: ${window.CFG?.DATA_URL}`),r}else console.log(`[tour-category] Legacy config returned ${i.status}: ${i.statusText}`)}catch(o){console.log(`[tour-category] Legacy config fetch failed: ${o.message}`)}return console.warn(`[tour-category] No configuration found for ${n}, using defaults`),null}catch(n){return console.error("[tour-category] Error loading client config:",n),null}}async function V(n="#tour-list"){let a=o=>new Promise(i=>setTimeout(i,o));function l(){let o=window.CFG&&window.CFG.LIST_SELECTOR||n,i=document.querySelector(o)||document.querySelector("#tour-list");if(i&&i.dataset){let{dataUrl:r,filterMode:c,filterValue:g,listSelector:h}=i.dataset;if(r||c||g||h)return{DATA_URL:r||window.CFG&&window.CFG.DATA_URL,FILTER:c||g?{mode:c||"all",value:g||""}:window.CFG&&window.CFG.FILTER,LIST_SELECTOR:h||window.CFG&&window.CFG.LIST_SELECTOR||"#tour-list"}}return window.CFG&&window.CFG.DATA_URL?window.CFG:null}document.readyState==="loading"&&await new Promise(o=>document.addEventListener("DOMContentLoaded",o,{once:!0}));for(let o=0;o<60;o++){let i=l();if(i&&i.DATA_URL)return window.CFG=i,i;await a(50)}return console.error("Tour list config not found. Ensure data-data-url or window.CFG is present."),null}(async function(){if($(),_(),window.CFG?.DATA_URL)console.log("[tour-category] DATA_URL already provided, skipping client config loading:",window.CFG.DATA_URL);else{console.log("[tour-category] No DATA_URL found, attempting to load client configuration...");try{await G()}catch{console.warn("[tour-category] Failed to load client config, using manual configuration")}}if(!window.CFG?.DATA_URL&&window.CFG?.client)if(console.log("[tour-category] Client config loading failed for:",window.CFG.client),window.CFG.fallbackUrl)window.CFG.DATA_URL=window.CFG.fallbackUrl,console.log("[tour-category] Using custom fallback DATA_URL:",window.CFG.DATA_URL);else{console.warn(`[tour-category] No DATA_URL available for client: ${window.CFG.client}. Component will not work without DATA_URL.`),console.warn("Please provide one of the following:"),console.warn('1. window.CFG.fallbackUrl = "https://your-api.com/tours"'),console.warn('2. window.CFG.DATA_URL = "https://your-api.com/tours"'),console.warn("3. Ensure client config exists and is accessible");let e=document.querySelector(window.CFG.LIST_SELECTOR||"#tour-list"),t=document.getElementById("skeleton");e&&t&&(t.style.display="none",e.hidden=!1,e.innerHTML=`
          <div style="padding: 20px; background: #ffe6e6; border: 1px solid #ff9999; border-radius: 8px; color: #cc0000;">
            <h3>Configuration Error</h3>
            <p>Unable to load tour data for client: <strong>${window.CFG.client}</strong></p>
            <p>Please check the browser console for configuration instructions.</p>
          </div>
        `);return}await V("#tour-list");let{DATA_URL:n,FILTER:a,LIST_SELECTOR:l}=window.CFG||{},o=l||"#tour-list",i=document.querySelector(o),r=document.getElementById("skeleton"),c=e=>String(e??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),g=e=>String(e??"").toLowerCase().trim(),h=e=>{if(e==null||e==="")return"";let t=typeof e=="number"?e:Number(String(e).replace(/[^\d.]/g,""));if(!Number.isFinite(t))return c(e);try{return new Intl.NumberFormat(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t)}catch{return"$"+Math.round(t).toLocaleString()}},U=async(e,{timeout:t=12e3,...s}={})=>{let d=new AbortController,u=setTimeout(()=>d.abort(),t);try{return await fetch(e,{...s,signal:d.signal})}finally{clearTimeout(u)}},E=e=>{let t=2166136261;for(let s=0;s<e.length;s++)t^=e.charCodeAt(s),t=t+((t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24))>>>0;return("0000000"+t.toString(16)).slice(-8)},v=e=>E(JSON.stringify(e||[])),D=(e=[])=>{let t=document.getElementById("tours-itemlist-ld");if(t&&t.remove(),!e.length)return;let s={"@context":"https://schema.org","@type":"ItemList",itemListElement:e.map((u,f)=>({"@type":"ListItem",position:f+1,url:`/${u.slug||""}`}))},d=document.createElement("script");d.type="application/ld+json",d.id="tours-itemlist-ld",d.textContent=JSON.stringify(s),document.head.appendChild(d)};if(r&&!r.children.length){let e=()=>`
      <div class="skeleton" role="presentation">
        <div class="shimmer sk-img"></div>
        <div class="sk-pad">
          <div class="shimmer sk-line lg" style="width:60%"></div>
          <div style="display:flex;gap:12px;flex-wrap:wrap">
            <div class="shimmer sk-line" style="width:110px"></div>
            <div class="shimmer sk-line" style="width:130px"></div>
            <div class="shimmer sk-line" style="width:90px"></div>
          </div>
          <div class="shimmer sk-line" style="width:95%"></div>
          <div class="shimmer sk-line" style="width:88%"></div>
        </div>
        <div class="sk-right">
          <div class="shimmer sk-line" style="width:140px"></div>
          <div class="shimmer sk-line lg" style="width:80px"></div>
          <div class="shimmer sk-pill" style="width:140px"></div>
        </div>
      </div>`;r.innerHTML=e()+e()+e()}let m=()=>{r&&(r.setAttribute("hidden","true"),r.style.display="none",requestAnimationFrame(()=>r.remove()))},k=setTimeout(m,2e4),C="tours-cache-v2:"+[(n||"").split("?")[0],a?.mode||"all",a?.value||""].join("|"),I=()=>{try{return JSON.parse(localStorage.getItem(C))||null}catch{return null}},O=e=>{try{localStorage.setItem(C,JSON.stringify(e))}catch{}},A=e=>!a||a.mode==="all"?!0:a.mode==="tag"?(e.tags||[]).map(g).includes(g(a.value)):a.mode==="type"?g(e.type)===g(a.value):a.mode==="keyword"?[e.name,e.excerpt,(e.tags||[]).join(" ")].map(g).join(" ").includes(g(a.value)):!0,j=(e,t)=>{let s=c(e.name),d=e.duration?c(e.duration):"",u=e.location?c(e.location):"",f=e.type?c(e.type):"",R=e.group?c(e.group):"",S=e.excerpt?c(e.excerpt):"",M=c(e.slug||""),z=c(e.image||""),H="(max-width:860px) 100vw, 320px",b=`/${M}`;return`
    <article class="tour-card" data-url="${b}" aria-label="${s}">
      <div class="tour-img">
        <a href="${b}" class="img-link" aria-label="View ${s} details">
          <img
            src="${z}"
            sizes="${H}"
            alt="${s||"Tour image"}"
            ${t<2?'loading="eager" fetchpriority="high" decoding="async"':'loading="lazy" decoding="async"'}
            width="320" height="240"
          >
        </a>
      </div>
      <div class="tour-body">
        <h3><a href="${b}" class="title-link">${s}</a></h3>
        <div class="tour-meta" aria-label="Tour details">
          ${d?`<span><span aria-hidden="true">\u23F1 </span><span class="sr-only">Duration: </span>${d}</span>`:""}
          ${u?`<span><span aria-hidden="true">\u{1F4CD} </span><span class="sr-only">Location: </span>${u}</span>`:""}
          ${f?`<span><span aria-hidden="true">\u{1F3F7} </span><span class="sr-only">Type: </span>${f}</span>`:""}
             <!-- Mount Points -->
        <div id="skeleton" class="skeleton-list" aria-hidden="true"></div>
        <div id="tour-list" class="tour-list" hidden aria-live="polite"></div>
        
        <!-- Configuration -->
        <script>
        window.CFG = {
          client: 'tour-driver',
          FILTER: { mode: 'type', value: 'Food & Culinary' },
          LIST_SELECTOR: '#tour-list'
        };
        <\/script>
        
        <!-- Single-file component (includes CSS + JS + fonts) -->
        <script src="https://cdn.jsdelivr.net/gh/krishnalewin-hash/tourism-ui-kit@91a9e41/dist/tour-category-page.min.js"><\/script>     ${R?`<span><span aria-hidden="true">\u{1F465} </span><span class="sr-only">Group: </span>${R}</span>`:""}
        </div>
        ${S?`<p class="tour-desc">${S}</p>`:""}
      </div>
      <aside class="tour-price" aria-label="Price and actions">
        <div class="micro">Prices starting from\u2026</div>
        ${e.fromPrice!=null&&e.fromPrice!==""?`<div class="amount">${h(e.fromPrice)}</div>`:""}
        <div class="micro">Request exact quote</div>
        <a href="${b}" class="btn btn-primary">View Details</a>
      </aside>
    </article>`};function P(e){let t=e.querySelectorAll(".tour-card[data-url]");for(let s of t){let d=s.getAttribute("data-url");d&&(s.style.cursor="pointer",s.hasAttribute("tabindex")||s.setAttribute("tabindex","0"),s.setAttribute("role","link"),s.addEventListener("click",u=>{u.defaultPrevented||u.target.closest("a, button, input, select, textarea")||(window.location.href=d)}),s.addEventListener("keydown",u=>{u.target===s&&(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),window.location.href=d)}))}}let T=(e=[])=>{i.innerHTML=e.length?e.map((t,s)=>j(t,s)).join(""):`<div style="opacity:.8">No tours found for this filter.</div>
         <div><button class="btn btn-primary" type="button" onclick="location.reload()">Retry</button></div>`,i.hidden=!1,P(i),D(e)};if(!i){console.error("Mount not found:",o),clearTimeout(k),m();return}let w=I(),L=!1;if(w&&Array.isArray(w.tours)){let e=w.tours.filter(A);T(e),L=!0,requestAnimationFrame(m)}let y=new URLSearchParams;a?.mode&&a?.value&&(y.set("mode",a.mode),y.set("value",a.value)),y.set("v",Date.now().toString());let q=(n||"").includes("?")?"&":"?",N=(n||"")+q+y.toString(),p=[],x=null;try{let e=await U(N,{timeout:12e3,cache:"no-store"});if(!e.ok)throw new Error(`HTTP ${e.status}`);let t=await e.json();p=Array.isArray(t.tours)?t.tours:[],x=t.version||v(p)}catch(e){console.error("Fetch error",e)}let B=p.filter(A),F=w?.version||null;(!L||!F||x&&x!==F)&&(T(B),requestAnimationFrame(m),p.length&&O({version:x||v(p),tours:p})),requestAnimationFrame(()=>{clearTimeout(k),m()})})();window.TourCategory={init:async function(n={}){if(window.CFG={...window.CFG,...n},$(),_(),n.client)try{await G()}catch{console.warn("[tour-category] Failed to load client config, using manual configuration")}document.readyState==="loading"&&await new Promise(g=>document.addEventListener("DOMContentLoaded",g,{once:!0}));let{DATA_URL:a,FILTER:l,LIST_SELECTOR:o}=window.CFG||{},i=o||n.elementId||"#tour-list",r=document.querySelector(i),c=document.getElementById("skeleton");if(!r){console.error(`[tour-category] Mount element not found: ${i}`);return}if(!a){console.error("[tour-category] No DATA_URL configured");return}console.log("[tour-category] Programmatic initialization complete")}};})();
