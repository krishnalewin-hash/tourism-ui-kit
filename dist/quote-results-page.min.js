var QuoteResults=(()=>{var m="quote-calc",S=':root{--card-bg:#fff;--card-border:#ececec;--muted:#6b7280;--accent:#D65130;--accent-600:#b54224;--shadow:0 8px 24px rgba(0,0,0,.06);--radius:12px;--font:"Poppins",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}html,body{margin:0;padding:0}body{font-family:var(--font);color:#111827;background:#fff}.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 16px;border-radius:5px;font-weight:700;text-decoration:none}.btn-primary{background:var(--accent);color:#fff}.btn-primary:hover,.btn-primary:focus{background:var(--accent-600)}.btn:focus{outline:2px solid #000;outline-offset:2px}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.skeleton-list{display:grid;gap:16px}.skeleton{display:grid;grid-template-columns:320px 1fr 200px;gap:20px;background:#fff;border:1px solid var(--card-border);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}.shimmer{position:relative;background:#eef0f3;overflow:hidden;border-radius:12px}.shimmer::after{content:"";position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,.6) 50%, rgba(255,255,255,0) 100%);animation:shimmer 1.4s infinite}@keyframes shimmer{100%{transform:translateX(100%)}}.sk-img{height:100%;min-height:220px}.sk-line{height:14px;border-radius:8px}.sk-line.lg{height:20px}.sk-pad{padding:18px 16px;display:flex;flex-direction:column;gap:12px}.sk-right{padding:16px;display:flex;flex-direction:column;gap:10px;border-left:1px solid var(--card-border)}.sk-pill{height:36px;border-radius:5px}@media (max-width:1024px){.skeleton{grid-template-columns:260px 1fr 180px}}@media (max-width:860px){.skeleton{grid-template-columns:1fr}.sk-right{border-left:none;border-top:1px solid var(--card-border)}.sk-img{min-height:180px}}#quote-calc{box-sizing:border-box;max-width:1100px;margin:24px auto;padding:24px;border:1px solid #ececec;border-radius:12px;background:#fff;box-shadow:0 8px 24px rgba(0,0,0,.06);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}.qc-row{display:grid;grid-template-columns:1fr 1fr;gap:32px;align-items:start}@media (max-width:900px){.qc-row{grid-template-columns:1fr;gap:24px}#quote-calc{padding:10px}}.qc-map{width:100%;height:400px;border-radius:12px;background:#f3f4f6;overflow:hidden;border:1px solid #e5e7eb}.qc-details{display:flex;flex-direction:column;gap:0px}.qc-detail-item{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f3f4f6}.qc-detail-item:last-of-type{border-bottom:none}.qc-detail-label{font-weight:800;color:#374151;font-size:18px}.qc-detail-value{font-weight:400;color:#111827;font-size:18px}.qc-detail-value.highlight{font-size:18px;font-weight:800;color:#059669}.qc-buttons{display:flex;gap:12px;margin-top:24px;flex-wrap:wrap}.qc-btn{flex:1;min-width:140px;padding:14px 20px;border-radius:8px;font-weight:600;font-size:18px;text-align:center;text-decoration:none;cursor:pointer;border:none;transition:all 0.2s ease}.qc-btn-primary{background:#059669;color:white;border:2px solid #059669}.qc-btn-primary:hover{background:#047857;border-color:#047857}.qc-btn-secondary{background:white;color:#374151;border:2px solid #d1d5db}.qc-btn-secondary:hover{background:#f9fafb;border-color:#9ca3af}.qc-err{padding:12px;border:1px solid #f3d2d2;background:#fff6f6;color:#9b1c1c;border-radius:10px}.qc-shimmer{position:relative;border-radius:10px;background:#eef0f3;overflow:hidden}.qc-shimmer:after{content:"";position:absolute;inset:0;transform:translateX(-100%);background:linear-gradient(90deg,rgba(255,255,255,0) 0,rgba(255,255,255,.6) 50%,rgba(255,255,255,0) 100%);animation:qc-shimmer 1.4s infinite}@keyframes qc-shimmer{100%{transform:translateX(100%)}}';function A(){if(document.getElementById("quote-results-styles"))return;let e=document.createElement("style");e.id="quote-results-styles",e.textContent=S,document.head.appendChild(e)}var E={googleApiKey:window.CFG&&(window.CFG.GMAPS_KEY||window.CFG.PLACES_API_KEY)||"",bands:[{maxMi:10,pricePP:30},{maxMi:20,pricePP:40},{maxMi:40,pricePP:55},{maxMi:999,pricePP:70}],minPricePP:30,defaultPassengers:1,remote:{keywords:["tryall","round hill","dublin castle","anchovy","greenwood","bluefields","sheffield","orange bay","rhodes hall"],surchargePP:5},map:{zoom:9}},s={...E};async function M(){try{let e=window.CFG?.client||new URLSearchParams(location.search).get("client")||sessionStorage.getItem("client")||"demo",o=window.CFG?.base||"krishnalewin-hash/tourism-ui-kit@main";console.log(`[quote-calc] Loading client config: ${e}`),console.log(`[quote-calc] Base URL: ${o}`);try{let t;o.startsWith("../")||o.startsWith("./")||o.startsWith("/")?t=`${o}/clients/_build/${e}.json`:t=`https://cdn.jsdelivr.net/gh/${o}/clients/_build/${e}.json`,console.log(`[quote-calc] Fetching built config: ${t}`);let a=await fetch(t,{cache:"no-store"});if(a.ok){let n=await a.json();return n.QUOTE_RESULTS_CONFIG?s={...s,...n.QUOTE_RESULTS_CONFIG}:n.PRICING_RATES&&q(n.PRICING_RATES),n.SHARED_CONFIG?.GMAPS_KEY?s.googleApiKey=n.SHARED_CONFIG.GMAPS_KEY:n.FORM_CONFIG?.GMAPS_KEY&&(s.googleApiKey=n.FORM_CONFIG.GMAPS_KEY),console.log(`[quote-calc] Successfully loaded ${e} configuration from built config`),s}else console.log(`[quote-calc] Built config returned ${a.status}: ${a.statusText}`)}catch(t){console.log(`[quote-calc] Built config fetch failed: ${t.message}`)}try{let t;o.startsWith("../")||o.startsWith("./")||o.startsWith("/")?t=`${o}/clients/${e}.json`:t=`https://cdn.jsdelivr.net/gh/${o}/clients/${e}.json`,console.log(`[quote-calc] Trying legacy config: ${t}`);let a=await fetch(t,{cache:"no-store"});if(a.ok){let n=await a.json();return n.QUOTE_RESULTS_CONFIG?s={...s,...n.QUOTE_RESULTS_CONFIG}:n.PRICING_RATES&&q(n.PRICING_RATES),n.SHARED_CONFIG?.GMAPS_KEY?s.googleApiKey=n.SHARED_CONFIG.GMAPS_KEY:n.FORM_CONFIG?.GMAPS_KEY&&(s.googleApiKey=n.FORM_CONFIG.GMAPS_KEY),console.log(`[quote-calc] Successfully loaded ${e} configuration from legacy config`),s}else console.log(`[quote-calc] Legacy config returned ${a.status}: ${a.statusText}`)}catch(t){console.log(`[quote-calc] Legacy config fetch failed: ${t.message}`)}return console.warn(`[quote-calc] No configuration found for ${e}, using defaults`),s}catch(e){return console.error("[quote-calc] Error loading client config:",e),s}}function q(e){if(e.DISTANCE_BANDS&&e.BASE_RATES){let o=e.BASE_RATES.SEDAN||120;s.bands=e.DISTANCE_BANDS.map(t=>({maxMi:Math.round(t.maxKm*.621371),pricePP:Math.round(o*t.multiplier)})),e.REMOTE_AREAS&&(s.remote.surchargePP=e.REMOTE_AREAS.SURCHARGE_USD||5)}else e.zones&&console.log("[quote-calc] Zone-based pricing detected, using default distance bands")}var C=new URLSearchParams(location.search),i=e=>{let o=C.get(e);if(o&&String(o).trim())return o;try{return sessionStorage.getItem("lead:"+e)||""}catch{return""}return window.LEAD_DATA&&window.LEAD_DATA[e]?window.LEAD_DATA[e]:""},w=e=>String(e||"").replace(/[<>&"']/g,o=>({"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"})[o]),I=e=>(e||0).toFixed(1)+" miles",G=e=>Math.round((e||0)/60)+" minutes";function $(e){for(let o of s.bands)if(e<o.maxMi)return o.pricePP;return s.bands[s.bands.length-1].pricePP}function T(e,o){let t=(e+" "+o).toLowerCase();for(let a of s.remote.keywords)if(t.includes(a))return s.remote.surchargePP;return 0}function N(e){let{pickup:o,dropoff:t,miles:a,seconds:n,pp:c,total:l,pax:d}=e;return`
      <div class="qc-row">
        <div>
          <div id="qc-map" class="qc-map qc-shimmer" aria-label="Route map"></div>
        </div>

        <div class="qc-details">
          <div class="qc-detail-item">
            <span class="qc-detail-label">From:</span>
            <span class="qc-detail-value">${w(o)}</span>
          </div>
          <div class="qc-detail-item">
            <span class="qc-detail-label">To:</span>
            <span class="qc-detail-value">${w(t)}</span>
          </div>
          <div class="qc-detail-item">
            <span class="qc-detail-label">Distance:</span>
            <span class="qc-detail-value">${I(a)}</span>
          </div>
          <div class="qc-detail-item">
            <span class="qc-detail-label">Est. Duration:</span>
            <span class="qc-detail-value">${G(n)}</span>
          </div>
          <div class="qc-detail-item">
            <span class="qc-detail-label">Number of Passengers:</span>
            <span class="qc-detail-value">${d||s.defaultPassengers}</span>
          </div>
          <div class="qc-detail-item">
            <span class="qc-detail-label">Cost per person:</span>
            <span class="qc-detail-value">$${c}</span>
          </div>
          <div class="qc-detail-item">
            <span class="qc-detail-label">Total Cost:</span>
            <span class="qc-detail-value highlight">$${l}</span>
          </div>
          
          <div class="qc-buttons">
            <button class="qc-btn qc-btn-primary" onclick="handlePayNow()">Pay Now</button>
            <button class="qc-btn qc-btn-secondary" onclick="handleContactUs()">Contact Us</button>
          </div>
        </div>
      </div>
    `}function R(){return`
      <div class="qc-row">
        <div class="qc-shimmer" style="height:400px;border-radius:12px;"></div>
        <div class="qc-shimmer" style="height:400px;border-radius:12px;"></div>
      </div>
    `}function F(e){if(console.log("[quote-calc] Loading Google Maps..."),window.google&&google.maps&&google.maps.DirectionsService)return console.log("[quote-calc] Google Maps already loaded"),e();let o=s.googleApiKey;if(console.log(`[quote-calc] Using API key: ${o?.substring(0,15)}...`),!o){console.error("[quote-calc] Missing Google Maps API key"),e("no-key");return}if(document.querySelector("script[data-qc-gmaps]")){console.log("[quote-calc] Google Maps script already exists, waiting for load...");let a=()=>window.google?.maps?.DirectionsService?e():setTimeout(a,100);a();return}console.log("[quote-calc] Creating Google Maps script tag");let t=document.createElement("script");t.src=`https://maps.googleapis.com/maps/api/js?key=${o}&libraries=places`,t.setAttribute("data-qc-gmaps","1"),t.onload=()=>{console.log("[quote-calc] Google Maps script loaded successfully"),e()},t.onerror=()=>{console.error("[quote-calc] Failed to load Google Maps"),e("load-error")},document.head.appendChild(t)}async function y(){A();let e=document.getElementById(m);if(!e){console.warn(`[quote-calc] No element #${m} found`);return}let o=i("pickup_location"),t=i("dropoff_location");if(console.log(`[quote-calc] Starting calculation with pickup: ${o}, dropoff: ${t}`),console.log(`[quote-calc] Initial CONFIG.googleApiKey: ${s.googleApiKey?.substring(0,15)}...`),!o||!t){e.innerHTML='<div class="qc-error">Missing pickup or dropoff location</div>';return}e.innerHTML=R();try{await M(),console.log(`[quote-calc] After config loading, CONFIG.googleApiKey: ${s.googleApiKey?.substring(0,15)}...`)}catch(a){console.warn("[quote-calc] Failed to load client config, using defaults:",a)}F(a=>{if(a){e.innerHTML=`<div class="qc-error">Could not load Google Maps: ${a}</div>`;return}new google.maps.DirectionsService().route({origin:o,destination:t,travelMode:google.maps.TravelMode.DRIVING},(c,l)=>{if(l!=="OK"){e.innerHTML=`<div class="qc-error">Couldn't calculate the route right now. Please try again.</div>`,console.error("[quote-calc] Directions failed:",l);return}let d=c.routes[0].legs[0],r=(d.distance?.value||0)/1609.344,g=d.duration?.value||0,u=i("passengers")||i("number_of_passengers"),b=u&&parseInt(u)>0?parseInt(u):s.defaultPassengers,v=$(r),_=T(o,t),h=Math.max(s.minPricePP,v+_),k=Math.round(h*b),f=document.createElement("div");f.id=m,f.innerHTML=N({pickup:o,dropoff:t,miles:Math.round(r*10)/10,seconds:g,pax:b,pp:h,total:k}),e.replaceWith(f);let x=document.getElementById("qc-map"),P=new google.maps.Map(x,{zoom:s.map.zoom||9});new google.maps.DirectionsRenderer({map:P}).setDirections(c),x.classList.remove("qc-shimmer")})})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",y):y();window.handlePayNow=function(){let e=i("pickup_location"),o=i("dropoff_location"),t=i("pickup_date"),a=i("pickup_time"),n=i("passengers")||i("number_of_passengers")||s.defaultPassengers,c=i("first_name"),l=i("last_name"),d=i("email"),p=i("phone"),r=new URLSearchParams;e&&r.set("pickup_location",e),o&&r.set("dropoff_location",o),t&&r.set("pickup_date",t),a&&r.set("pickup_time",a),n&&r.set("passengers",n),c&&r.set("first_name",c),l&&r.set("last_name",l),d&&r.set("email",d),p&&r.set("phone",p);let g=`https://tourdriver.com/book?${r.toString()}`;window.location.href=g};window.handleContactUs=function(){let e=i("pickup_location"),o=i("dropoff_location"),t=i("passengers")||i("number_of_passengers")||s.defaultPassengers,a=`Hi! I'd like to book a transfer from ${e} to ${o} for ${t} passenger(s). Please contact me with more details.`,n=`https://wa.me/1876XXXXXXX?text=${encodeURIComponent(a)}`,c=`mailto:bookings@tourdriver.com?subject=Transfer Booking Request&body=${encodeURIComponent(a)}`;window.open(n,"_blank")};})();
/*!
 * Quote Calc Enhanced (Distance → Price) — results page widget with client-specific pricing
 * - Always shows total price (defaults to 1 passenger if none specified)
 * - Reads lead params (URL first, then sessionStorage fallback)
 * - Loads Google Maps JS (if not already present)
 * - Draws route map (DirectionsService/Renderer)
 * - Calculates price from client-specific distance bands + remote surcharge + minimum
 * - Supports client-specific pricing configuration from /clients/{client}.json
 *
 * Mount:   <div id="quote-calc"></div>
 * Depends: window.CFG.GMAPS_KEY (or a <script> with Maps already loaded)
 */
