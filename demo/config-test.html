<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tour Driver Config Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .log { background: #f5f5f5; padding: 10px; margin: 10px 0; border-left: 4px solid #007cba; }
        .error { border-color: #d32f2f; background: #ffebee; }
        .success { border-color: #4caf50; background: #e8f5e9; }
    </style>
</head>
<body>
    <h1>Tour Driver Configuration Test</h1>
    
    <div id="logs"></div>
    
    <h2>Configuration Status</h2>
    <div id="config-status">Loading...</div>
    
    <h2>Form Container</h2>
    <div id="quote-request-form">
        <!-- This is where GHL forms would be placed -->
        <input type="text" name="pickup_location" placeholder="Pickup Location" data-q="pickup_location">
        <input type="text" name="dropoff_location" placeholder="Dropoff Location" data-q="drop-off_location">
    </div>

    <script>
        // Capture console logs for display
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        
        function addLog(message, type = 'info') {
            const logsDiv = document.getElementById('logs');
            const logDiv = document.createElement('div');
            logDiv.className = `log ${type}`;
            logDiv.textContent = message;
            logsDiv.appendChild(logDiv);
            logsDiv.scrollTop = logsDiv.scrollHeight;
        }
        
        console.log = (...args) => {
            originalLog(...args);
            addLog(args.join(' '), 'info');
        };
        
        console.warn = (...args) => {
            originalWarn(...args);
            addLog(args.join(' '), 'error');
        };
        
        console.error = (...args) => {
            originalError(...args);
            addLog(args.join(' '), 'error');
        };

        // Set up configuration
        window.CFG = {
            client: 'tour-driver',
            base: 'krishnalewin-hash/tourism-ui-kit@afe48a9981e60636ef7cdc9f0c80764c623138a2'
        };
        
        console.log('Initial CFG:', JSON.stringify(window.CFG, null, 2));
        
        // Monitor configuration loading
        function checkConfigStatus() {
            const statusDiv = document.getElementById('config-status');
            let status = '<h3>Window.CFG:</h3><pre>' + JSON.stringify(window.CFG, null, 2) + '</pre>';
            
            if (window.BookingForm?.CONFIG) {
                status += '<h3>BookingForm.CONFIG:</h3><pre>' + JSON.stringify({
                    googleApiKey: window.BookingForm.CONFIG.googleApiKey,
                    countries: window.BookingForm.CONFIG.countries,
                    configReady: window.BookingForm.configReady
                }, null, 2) + '</pre>';
            }
            
            if (window.BookingForm?.configReady) {
                statusDiv.innerHTML = '<div class="success">' + status + '</div>';
            } else {
                statusDiv.innerHTML = status;
            }
        }
        
        // Check status every 500ms
        setInterval(checkConfigStatus, 500);
    </script>
    
    <!-- Load the quote request form -->
    <script src="../dist/quote-request-form.min.js"></script>
</body>
</html>