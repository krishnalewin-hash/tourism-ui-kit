<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client-Specific Pricing Test - Quote Results</title>
    <style>
        body {
            font-family: system-ui, -apple-system, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .demo-header {
            background: white;
            padding: 24px;
            border-radius: 8px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .client-switcher {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .client-switcher button {
            margin: 5px;
            padding: 10px 15px;
            border: 1px solid #ddd;
            background: white;
            border-radius: 5px;
            cursor: pointer;
        }
        .client-switcher button.active {
            background: #0066cc;
            color: white;
        }
        .demo-content {
            margin-top: 24px;
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <h1>Client-Specific Pricing Test</h1>
        <p>This demo shows how different clients get different pricing for the same route. Switch between clients to see pricing differences.</p>
        
        <p><strong>Test Route:</strong> MBJ Airport → Negril Beach Resort (2 passengers, ~25 miles)</p>
        <ul>
            <li><strong>Demo Client:</strong> Lower-cost budget pricing</li>
            <li><strong>Kamar Tours:</strong> Mid-range pricing</li>
            <li><strong>Tour Driver:</strong> Premium pricing (converted from distance bands)</li>
        </ul>
    </div>

    <div class="client-switcher">
        <h3>Switch Client:</h3>
        <button onclick="switchClient('demo')" id="demo-btn" class="active">Demo Client</button>
        <button onclick="switchClient('kamar-tours')" id="kamar-btn">Kamar Tours</button>
        <button onclick="switchClient('tour-driver')" id="tour-btn">Tour Driver</button>
    </div>

    <div class="demo-content">
        <!-- Quote Results Component Mount Point -->
        <div id="quote-calc"></div>
    </div>

    <!-- Configuration for Quote Results Page -->
    <script>
        let currentClient = 'demo';
        
        function switchClient(client) {
            currentClient = client;
            
            // Update button states
            document.querySelectorAll('.client-switcher button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(client + '-btn').classList.add('active');
            
            // Update window.CFG
            window.CFG = {
                GMAPS_KEY: 'AIzaSyDomK0QVxMj2SzgbwIkUdlBZ2nyYxRJSOI',
                client: client,
                base: '../', // Use local files for testing
                COUNTRIES: ['jm'],
                PLACES: {
                    FIELDS: ['place_id','formatted_address','geometry','name','types'],
                    TYPES: ['establishment'],
                    PRIORITY_KEYWORDS: {
                        airport: ['airport','international airport','terminal','mbj','kin','ocj','neg','ktp'],
                        hotel: ['hotel','resort','inn','villa','guest house','guesthouse','lodgings','spa','apartments','suite','suites','bnb']
                    }
                }
            };
            
            // Set test parameters
            window.LEAD_DATA = {
                pickup_location: "Sangster International Airport",
                dropoff_location: "Negril Beach Resort",
                passengers: "2"
            };
            
            console.log(`Switched to client: ${client}`, window.CFG);
            
            // Reload the component by removing and re-adding the script
            reloadQuoteResults();
        }
        
        function reloadQuoteResults() {
            // Remove existing quote-calc content
            const mount = document.getElementById('quote-calc');
            mount.innerHTML = '<p>Loading client-specific pricing...</p>';
            
            // Remove existing script and reload
            const existingScript = document.querySelector('script[src*="quote-results-page.min.js"]');
            if (existingScript) {
                existingScript.remove();
            }
            
            // Add script back with cache buster
            const script = document.createElement('script');
            script.src = `../dist/quote-results-page.min.js?t=${Date.now()}`;
            script.onload = () => {
                console.log('Quote Results component reloaded');
            };
            document.head.appendChild(script);
        }
        
        // Initialize with demo client
        switchClient('demo');
    </script>

    <!-- Load Quote Results Component -->
    <link rel="stylesheet" href="../dist/quote-results-page.min.css">
    
    <script>
        // Debug information
        setTimeout(() => {
            console.log('Quote Results component check...');
            console.log('Window.QuoteResults:', !!window.QuoteResults);
            console.log('Current CFG:', window.CFG);
            
            const mountPoint = document.getElementById('quote-calc');
            if (mountPoint) {
                console.log('✅ Mount point found');
            } else {
                console.error('❌ Mount point not found');
            }
        }, 1000);
    </script>
</body>
</html>