<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quick Debug Test</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; }
        .debug { background: #f5f5f5; padding: 15px; margin: 20px 0; border-radius: 5px; }
        .status { font-weight: bold; color: #007cba; }
    </style>
</head>
<body>
    <h1>üîß Quick Form Debug Test</h1>
    
    <form>
        <div class="form-group">
            <label for="pickup_time">Pickup Time (click to test popup)</label>
            <input type="text" id="pickup_time" data-q="pickup_time" placeholder="Select pickup time" required>
        </div>

        <div class="form-group">
            <label for="number_of_passengers">Number of Passengers (should convert to dropdown)</label>
            <input type="number" id="number_of_passengers" data-q="number_of_passengers" placeholder="Select passengers" required>
        </div>

        <div class="form-group">
            <label for="pickup_date">Pickup Date (click to test calendar)</label>
            <input type="text" id="pickup_date" data-q="pickup_date" placeholder="Select pickup date" required>
        </div>
    </form>

    <div class="debug">
        <h3>üêõ Debug Status</h3>
        <div id="status">Checking enhancement status...</div>
        <br>
        <button onclick="checkStatus()">üîÑ Refresh Status</button>
        <button onclick="manualTest()">üß™ Manual Test</button>
    </div>

    <!-- Load Kamar Tours Configuration -->
    <script>
    window.CFG = { CLIENT: 'kamar-tours' };
    console.log('üîß CFG set:', window.CFG);
    </script>

    <!-- Load CSS Styles -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/krishnalewin-hash/tourism-ui-kit@main/src/tour-detail/css/quote-form-styling.css">

    <!-- Load JavaScript Enhancement -->
    <script src="https://cdn.jsdelivr.net/gh/krishnalewin-hash/tourism-ui-kit@main/src/tour-detail/js/quote-form-styling.js"></script>

    <!-- Debug Script -->
    <script>
    function checkStatus() {
        const timeInput = document.querySelector('input[data-q="pickup_time"]');
        const passengerInput = document.querySelector('input[data-q="number_of_passengers"]');
        const passengerSelect = document.querySelector('select[data-q="number_of_passengers"]');
        const dateInput = document.querySelector('input[data-q="pickup_date"]');
        
        document.getElementById('status').innerHTML = `
            <div class="status">Time Picker:</div>
            ‚Ä¢ Input found: ${!!timeInput}<br>
            ‚Ä¢ Wired: ${timeInput?.dataset.timeSpinnerWired || 'NO'}<br>
            ‚Ä¢ Singleton exists: ${!!window.__singletonTimePicker}<br>
            ‚Ä¢ Popover element: ${!!document.getElementById('pickup-time-popover')}<br><br>
            
            <div class="status">Passenger Select:</div>
            ‚Ä¢ Original input: ${!!passengerInput}<br>
            ‚Ä¢ Dropdown created: ${!!passengerSelect}<br>
            ‚Ä¢ Wired: ${passengerInput?.dataset.paxSelectWired || 'NO'}<br>
            ‚Ä¢ Object exists: ${!!window.__passengerSelect}<br><br>
            
            <div class="status">Date Picker:</div>
            ‚Ä¢ Input found: ${!!dateInput}<br>
            ‚Ä¢ Wired: ${dateInput?.dataset.datePickerWired || 'NO'}<br>
            ‚Ä¢ Object exists: ${!!window.__pickupDatePicker}<br>
            ‚Ä¢ Popover element: ${!!document.getElementById('pickup-date-popover')}<br><br>
            
            <div class="status">Configuration:</div>
            ‚Ä¢ window.CFG: ${JSON.stringify(window.CFG)}
        `;
    }
    
    function manualTest() {
        console.log('üß™ Manual test starting...');
        
        // Test time picker
        const timeInput = document.querySelector('input[data-q="pickup_time"]');
        if (timeInput && window.__singletonTimePicker) {
            console.log('üïê Manually opening time picker...');
            window.__singletonTimePicker.openFor(timeInput);
        } else {
            console.log('‚ùå Time picker not ready');
        }
    }

    // Auto check status on load
    setTimeout(() => {
        checkStatus();
        console.log('üîß Auto status check completed');
    }, 2000);
    
    // Also check after 5 seconds
    setTimeout(() => {
        console.log('üîÑ Second status check...');
        checkStatus();
    }, 5000);
    </script>
</body>
</html>